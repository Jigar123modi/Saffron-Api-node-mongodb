{"version":3,"sources":["api/Booking/index.js"],"names":["express","require","controller","router","Router","post","validateAuthorizationUser","newBookingOrder","index","get","validateAuthorization","getBookingOrder","put","updateBookingOrder","validateAuthorizationEmployee","updateBookingEmployeeOrder","validateAdminEmployeeAuthorization","getTeamMemberBookingOrder","use","err","req","res","next","arrayMessages","allErrorField","i","errors","length","Single_error","messages","toString","replace","push","join","status","json","module","exports"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,aAAaD,QAAQ,sBAAR,CAAjB;;AAEA,IAAIE,SAASH,QAAQI,MAAR,EAAb;;AAEA;AACAD,OAAOE,IAAP,CAAY,GAAZ,EAAiB,qBAAYC,yBAA7B,EAAwD,iCAAS,qBAAYC,eAArB,CAAxD,EAA+FL,WAAWM,KAA1G;;AAEA;AACAL,OAAOM,GAAP,CAAW,GAAX,EAAgB,qBAAYC,qBAA5B,EAAmDR,WAAWS,eAA9D;;AAEA;AACAR,OAAOS,GAAP,CAAW,WAAX,EAAwB,qBAAYF,qBAApC,EAA2D,iCAAS,qBAAYG,kBAArB,CAA3D,EAAqGX,WAAWW,kBAAhH;;AAEA;AACAV,OAAOS,GAAP,CAAW,oCAAX,EAAiD,qBAAYE,6BAA7D,EAA2F,iCAAS,qBAAYD,kBAArB,CAA3F,EAAqIX,WAAWa,0BAAhJ;;AAEA;AACAZ,OAAOM,GAAP,CAAW,gCAAX,EAA6C,qBAAYO,kCAAzD,EAA6Fd,WAAWe,yBAAxG;;AAEAd,OAAOe,GAAP,CAAW,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AACtC,QAAIC,gBAAgB,EAApB;AACA,QAAIC,aAAJ;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIN,IAAIO,MAAJ,CAAWC,MAA/B,EAAuCF,GAAvC,EAA4C;AACxC,YAAIG,eAAeT,IAAIO,MAAJ,CAAWD,CAAX,EAAcI,QAAd,CAAuBC,QAAvB,GACdC,OADc,CACN,IADM,EACA,EADA,CAAnB;AAEAR,sBAAcS,IAAd,CAAmBJ,YAAnB;AACH;AACDJ,oBAAgBD,cAAcU,IAAd,CAAmB,GAAnB,CAAhB;AACAZ,QAAIa,MAAJ,CAAW,GAAX,EACKC,IADL,CACU,qCAAkBX,aAAlB,EAAiCA,aAAjC,CADV;AAEH,CAXD;;AAaAY,OAAOC,OAAP,GAAiBlC,MAAjB","file":"index.js","sourcesContent":["import validations from './validation';\r\nimport validate from 'express-validation';\r\nimport {errorJsonResponse} from '../../config/commonHelper';\r\n\r\nvar express = require('express');\r\nvar controller = require('./Booking.controller');\r\n\r\nvar router = express.Router();\r\n\r\n//New Booking\r\nrouter.post('/', validations.validateAuthorizationUser, validate(validations.newBookingOrder), controller.index);\r\n\r\n//Get all order for SOD\r\nrouter.get('/', validations.validateAuthorization, controller.getBookingOrder);\r\n\r\n//Order move order finish to payment success step\r\nrouter.put('/:orderId', validations.validateAuthorization, validate(validations.updateBookingOrder), controller.updateBookingOrder);\r\n\r\n//Order move to process or finish\r\nrouter.put('/:orderId/teamMember/:teamMemberId', validations.validateAuthorizationEmployee,validate(validations.updateBookingOrder), controller.updateBookingEmployeeOrder);\r\n\r\n//Get all order for TemMember\r\nrouter.get('/TeamMemberOrder/:teamMemberId', validations.validateAdminEmployeeAuthorization, controller.getTeamMemberBookingOrder);\r\n\r\nrouter.use(function (err, req, res, next) {\r\n    let arrayMessages = [];\r\n    let allErrorField;\r\n    for (let i = 0; i < err.errors.length; i++) {\r\n        let Single_error = err.errors[i].messages.toString()\r\n            .replace(/\"/g, '');\r\n        arrayMessages.push(Single_error);\r\n    }\r\n    allErrorField = arrayMessages.join(',');\r\n    res.status(400)\r\n        .json(errorJsonResponse(allErrorField, allErrorField));\r\n});\r\n\r\nmodule.exports = router;\r\n"]}